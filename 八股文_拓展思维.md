# 八股文拓展

## 操作系统

### 并发和并行

- 概念上而言，**并发**是一个CPU在短时间内执行任务，这些任务不是同时发生的，例如处理大量的访问请求，从微观角度而言，每个时刻只能有一个任务；而**并行**强调的是CPU同时处理多个任务（多进程），比如某服务器同时处理用户的页面访问请求和支付请求，微观角度而言，每个时刻有多个任务，任务的数量取决于CPU的核心数。

- 拓展方向1-高层:java高并发的数据结构实现原理

  > https://www.iamshuaidi.com/1023.html
  >
  > https://blog.csdn.net/ahuangqingfeng/article/details/124269310

- 拓展方向2-中层:操作系统，多线程（分时复用，上下文切换）-单核性能，多进程-多核

- 拓展方向3-底层:计算机架构，程序执行的本质，多级流水线，java虚拟机如何将代码编译成字节码，再如何转换成系统的指令

- 拓展方向4-并行计算（cuda）

### 线程和进程

- 进程：进程是操作系统资源分配的基本单位，线程：是处理器任务调度和执行的基本单位
- 资源开销：每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和[程序计数器](https://so.csdn.net/so/search?q=程序计数器&spm=1001.2101.3001.7020)（PC），线程之间切换的开销小。
- 同一进程的线程共享本进程的地址空间和资源，而进程之间的地址空间和资源是相互独立的
- 一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮。
- 拓展方向1-jvm虚拟机：https://blog.csdn.net/ThinkWon/article/details/102021274
- 拓展方向2-多线程，多进程的应用-cuda并行计算（通信，带宽），java并行的数据结构，线程池
- 拓展方向3-底层操作系统，计算机架构

### 死锁

- 产生的必要条件
  1. 互斥条件：一段时间内某资源**仅由一进程所占用**
  2. 请求和保持条件：当进程因请求资源而阻塞时，对已获得的资源**保持不放**
  3. 不剥夺条件：进程已获得的资源在未使用完之前不能剥夺，只能使用完后由自己释放
  4. 环路等待条件：必定存在一个进程-资源的**环形链**
- 预防死锁
  1. 资源一次性分配：一次性分配所有的请求（破坏请求条件）
  2. 只要有一个资源得不到分配，也不给这个进程分配其他的资源（破坏请求保持条件）
  3. 当某进程获得了部分资源，但得不到其他资源，则释放已占有的资源（破坏不可剥夺条件）
  4. 系统给每类资源赋一个编号，每一个进程按编号递增的顺序请求资源，释放则相反（破坏环路等待条件）
- 避免死锁
  1. 银行家算法。算法要做的是判断对请求的满足是否会进入不安全状态，如果是，就拒绝请求；否则予以分配。
- 接触死锁
  1. 资源剥夺：挂起某些死锁进程，并抢占它的资源，将这些资源分配给其他死锁进程（但应该防止被挂起的进程长时间得不到资源）
  2. 撤销进程：强制撤销部分、甚至全部死锁进程并剥夺这些进程的资源（撤销的原则可以按进程优先级和撤销进程代价的高低进行）
  3. 进程回退：让一个或多个进程回退到足以避免死锁的地步。进程回退时自愿释放资源而不是被剥夺。要求系统保持进程的历史信息，设置还原点
